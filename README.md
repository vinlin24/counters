# Status Day Counters

> :mega: This README is mostly for future me if I decide to come back and review/enhance this project. If by any chance you are a stray visitor, you're welcome to use this code and instructions to mess around with your social media accounts too.

## Description

Sometimes I want my status to keep track of certain day counts, like "Day X of..." I originally had a few standalone, hard-coded scripts for Discord, Instagram, and Spotify. This project seeks to just bring them together and one place and make them more configurable.

The original standalone scripts are included in the [standalones/](standalones/) directory. They each had their own `.env` file with keys that may or may not be the same as the one used for this project, so they might not work when run as they are.

## Configuration

I placed a configuration file at:
```
~\.config\counters\bios.json
```
If it's missing, you should make one at this path. A log file will also be automatically generated in this directory when the program is run.

As of now, the `bios.json` file should have the following schema:

```json
{
  "discord": {
    "status": "string | null",
    "start": "YYYY-MM-DD | null"
  },
  "instagram": {
    "bio": "string | null",
    "start": "YYYY-MM-DD | null"
  },
  "spotify": [
    {
      "comment": "any",
      "playlist_id": "string",
      "name": "string | null",
      "description": "string | null",
      "start": "YYYY-MM-DD | null"
    },
    {
      "comment": "any",
      "playlist_id": "string",
      "name": "string | null",
      "description": "string | null",
      "start": "YYYY-MM-DD | null"
    }
  ]
}
```

- The strings to display (`status`, `bio`, `description`) can include, but don't need to, a `{0}` placeholder for where the day number will go. Example:
  ```json
  {
    ...
    "description": "day {0} of waiting for kaguya season 4"
    ...
  }
  ```
- The `start` keys are dates to be considered as "Day 1" in the count.
- For each Spotify playlist entry, you have the option to change either the playlist name, description, or both. Leaving a key as `null` signifies leaving it unchanged.
- The `comment` keys are not used. They're just a way to document each playlist entry for yourself.

## Setup

Since this program is meant to automate, it should be hooked up to something like Windows Task Scheduler to be run at every midnight, on startup, etc. That way, the statuses on all platforms update automatically, and all you need to do when you want to change the template is go to the [bios.json file](#configuration).

## Environment Recovery

This project makes use of an `.env` file to store sensitive values as environment variables. The required keys are:

- DISCORD_EMAIL
- DISCORD_PASSWORD
- INSTAGRAM_USERNAME
- INSTAGRAM_PASSWORD
- SPOTIFY_CLIENT_ID
- SPOTIFY_CLIENT_SECRET
- SPOTIFY_USER_REFRESH

You should obviously know your own email, username, and password credentials.

`SPOTIFY_CLIENT_ID` and `SPOTIFY_CLIENT_SECRET` can be found/regenerated for your application on the [Spotify Developer Dashboard](https://developer.spotify.com/dashboard/applications). The user refresh token, `SPOTIFY_USER_REFRESH`, can be regenerated by running a throwaway script:

```python
# pip install tekore
import tekore

CLIENT_ID = "SPOTIFY CLIENT ID"
CLIENT_SECRET = "SPOTIFY CLIENT SECRET"
token = tekore.request_client_token(CLIENT_ID, CLIENT_SECRET)

# This is your refresh token, save it somewhere
print(token.refresh_token)
```

The state of the project virtual environment is maintained in [requirements.txt](requirements.txt). You can recreate the environment like you normally would:
```
python -m venv .venv
.venv/Scripts/activate
pip install -r requirements.txt
```

You can use the helper script [run.ps1](run.ps1) to run some shortcut commands, like:
```powershell
./run  # Run the program, updating all statuses
```

## Implementation Details

The Spotify part uses the [tekore](https://tekore.readthedocs.io/en/stable/index.html) library as a wrapper for the [Spotify Web API](https://developer.spotify.com/documentation/web-api/). This is a robust and actively maintained library, so I do not worry much about having to modify this part of the code.

The Discord and Instagram parts use [Selenium](https://selenium-python.readthedocs.io/) webscraping to navigate the respective web applications and update my user status/bio since they lack APIs that support such an action. The problem with this is that their implementations risk breaking every update because they rely on the XPath values of web elements that can change unexpectedly. For example, the XPaths found in my original [discord_profile.py](counters/update_discord.py) are no longer applicable.

Lastly, don't forget to update the [JSON schema](#configuration) part of this documentation if you choose to add new features that affect it.